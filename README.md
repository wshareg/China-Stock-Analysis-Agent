# 📈 IF YOU HAVE NOTHING TO DO

基于 **[TuShare Pro](https://tushare.pro/)** 和 **GPT-4o** 的中国 A 股单票综合分析工具。  
通过五维度量化评分（质量 / 增长 / 估值 / 动量 / 风险）+ AI 深度研报生成，  
帮助研究人员快速获得 **数据驱动** 与 **语言解读** 的投资参考。  
**仅供研究学习，不构成投资建议。**

> 🎯 **核心特色**：所有分析结果均基于 GPT-4o 对 TuShare 数据的深度分析，确保结论的科学性和可靠性。

---

## ✨ 功能特性

- **🎯 AI 驱动分析**  
  - 所有分析结果均基于 GPT-4o 对 TuShare 数据的深度分析
  - 确保结论的科学性、可靠性和一致性
  - 无临时评分，所有内容等待 AI 分析完成后统一显示

- **多维度量化分析**  
  - 质量（ROE、毛利/净利率、CFO/净利等）
  - 增长（营收/净利同比、业绩预告/快报方向）
  - 估值（PE、PB、PEG）
  - 动量（近 3/6/12 月收益率、12-1 动量）
  - 风险（波动率、最大回撤、负债率）

- **可视化蜘蛛图**  
  - 基于 AI 分析结果的五维度评分分布
  - 交互式图表，支持缩放和悬停查看
  - 颜色编码，快速识别强弱项

- **数据来源**  
  - 基于 TuShare Pro 官方 API  
  - 支持 A 股全市场（沪/深/北交所）
  - 实时获取最新财务数据和市场指标

- **AI 深度分析**  
  - 调用 GPT-4o 生成结构化研报  
  - 通俗易懂的语言，适合普通投资者
  - 输出 5 个章节：公司概况、投资亮点、主要风险、建议投资者、投资建议
  - 基于所有 TuShare 数据进行分析，给出明确的操作指导

- **现代化 UI 设计**  
  - 25% 侧边栏 + 75% 主内容区域的响应式布局
  - 红色主题设计，专业美观
  - 流畅的用户体验，所有内容完整显示

- **可视化报告**  
  - 蜘蛛图展示 AI 分析的五维评分  
  - 一键导出 PDF 报告（包含公司概览、评分图表、AI 研报正文）
  - 支持中文显示，无乱码问题

- **跨平台运行**  
  - 兼容 Windows / macOS / Linux + Python 3.10/3.11

---

## 🚀 快速开始

### 环境要求
- Python 3.10 或更高版本
- TuShare Pro API 权限
- OpenAI API Key（用于 GPT-4o 分析）

### 安装步骤

1. **克隆项目**
```bash
git clone https://github.com/<yourname>/a-stock-value-analyzer.git
cd a-stock-value-analyzer
```

2. **创建虚拟环境并安装依赖**
```bash
python -m venv .venv
source .venv/bin/activate   # Windows: .venv\Scripts\activate
pip install -r requirements.txt
```

3. **配置环境变量**
```bash
cp .env.example .env
```

编辑 `.env` 文件，填入您的 API 密钥：
```env
TUSHARE_TOKEN=你的_tushare_pro_token
OPENAI_API_KEY=你的_openai_api_key   # 必填，用于 GPT-4o 分析
OPENAI_MODEL=gpt-4o                  # 可选，默认 gpt-4o
```

4. **启动应用**
```bash
streamlit run apps/streamlit_app.py
```

5. **使用应用**
- 在侧边栏输入股票代码（如：`600519.SH`、`000001.SZ`）
- 选择分析时间范围
- 点击"开始分析"，等待 AI 分析完成
- 查看完整的分析结果和投资建议

---

## 📊 界面操作

### 分析流程
1. **输入股票代码**
   - 支持 A 股全市场（沪/深/北交所）
   - 例：`600519.SH`（茅台）、`000001.SZ`（平安银行）

2. **选择时间范围**
   - 开始日期：默认一年前
   - 结束日期：默认当前日期

3. **开始分析**
   - 点击"开始分析"按钮
   - 系统自动获取 TuShare 数据
   - GPT-4o 进行深度分析

4. **查看结果**
   - 等待 AI 分析完成后统一显示
   - 包含投资建议、蜘蛛图、市场快照等
   - 所有内容基于 AI 分析结果

5. **导出报告**
   - 点击"生成PDF报告"创建分析报告
   - 点击"下载PDF报告"保存到本地

### 界面布局
- **左侧 25%**：分析设置区域
- **右侧 75%**：分析结果显示区域
- **响应式设计**：适配不同屏幕尺寸

---

## 📊 输出内容

### 1. 投资建议
- 基于 GPT-4o 分析的明确投资建议
- 买入/卖出/持有建议，附带具体理由
- 操作指导（买入时机、止损位、目标位等）

### 2. 蜘蛛图可视化
- 基于 AI 分析的五维度评分雷达图
- 交互式图表，支持悬停查看详细数值
- 直观显示各维度强弱对比

### 3. 综合评分与维度分数
- 基于 AI 分析的五维度评分
- 综合加权分数
- 各维度详细评分和说明

### 4. 最新行情快照
- 基于 TuShare 数据的实时行情
- 收盘价、成交量、PE、PB、换手率等
- 公司概况和行业信息

### 5. AI 深度分析报告
- GPT-4o 基于所有 TuShare 数据生成的结构化中文研报
- 通俗易懂的语言，适合普通投资者
- 包含 5 个章节：
  - **公司概况**：基于基本信息和行业背景
  - **投资亮点**：基于各维度评分和财务指标
  - **主要风险**：基于风险评分和具体数据
  - **建议投资者**：针对不同类型投资者的建议
  - **投资建议**：明确的买入/卖出/持有建议

### 6. PDF 报告
- 公司概览表
- AI 分析的五维度蜘蛛图
- 完整的 AI 深度分析报告
- 支持中文显示，无乱码问题

---

## 🔧 技术架构

### 核心模块
- `src/config.py` - 配置管理
- `src/data.py` - 数据获取（TuShare API）
- `src/indicators.py` - 指标计算
- `src/analysis.py` - 分析逻辑
- `src/ai.py` - AI 分析（GPT-4o）
- `src/report.py` - 报告生成

### 数据来源
- **TuShare Pro**：股票基础数据、财务数据、行情数据
- **OpenAI GPT-4o**：AI 深度分析和投资建议生成

### 可视化技术
- **Plotly**：交互式蜘蛛图和图表
- **Streamlit**：Web 界面框架
- **ReportLab**：PDF 报告生成

### AI 分析流程
1. **数据获取**：从 TuShare Pro 获取完整的股票数据
2. **AI 分析**：GPT-4o 基于所有数据进行深度分析
3. **评分生成**：AI 解析分析结果，生成五维度评分
4. **报告生成**：生成结构化的投资分析报告

---

## 🎯 AI 分析特色

### 分析深度
- **全面数据覆盖**：基于 TuShare Pro 的所有可用数据
- **智能评分系统**：GPT-4o 自动解析分析结果，生成五维度评分
- **结构化报告**：5 个章节的完整投资分析报告

### 投资建议质量
- **明确操作指导**：买入/卖出/持有建议，附带具体理由
- **风险控制**：明确的止损位和风险提示
- **时机把握**：基于市场数据的买入时机建议

### 数据驱动
- **无主观判断**：所有结论基于 TuShare 数据分析得出
- **实时更新**：使用最新的财务和市场数据
- **科学可靠**：GPT-4o 确保分析的科学性和一致性

---

## ⚠️ 注意事项

### API 权限
1. **TuShare Pro**
   - 需要有效的 TuShare Pro 账户和 API Token
   - 免费账户有访问频率限制
   - 部分数据需要付费权限

2. **OpenAI API**
   - 需要 OpenAI 账户和 API Key
   - 建议使用 GPT-4o 模型以获得最佳效果
   - 确保账户有足够的余额

### 使用限制
- 本工具仅供研究学习使用
- 不构成投资建议
- 请遵守相关 API 的使用条款
- 所有分析结果基于 AI 生成，请谨慎参考

---

## 🐛 常见问题

### Q: 为什么需要等待 AI 分析完成？
A: 所有分析结果都基于 GPT-4o 对 TuShare 数据的深度分析，确保结论的科学性和一致性。

### Q: 为什么 TuShare API 访问失败？
A: 检查 API Token 是否正确配置，免费账户有访问频率限制，建议升级账户。

### Q: AI 分析失败怎么办？
A: 检查 OpenAI API Key 是否正确配置，确保账户有足够的余额，网络连接正常。

### Q: 如何获取更多股票数据？
A: 升级 TuShare Pro 账户或联系客服获取更高权限。

### Q: 蜘蛛图如何解读？
A: 蜘蛛图显示了基于 AI 分析的五个维度评分，面积越大表示综合表现越好，各维度越均衡表示投资价值越稳定。

### Q: 投资建议的可靠性如何？
A: 所有建议基于 GPT-4o 对 TuShare 数据的深度分析，但仍需结合个人判断，不构成投资建议。

### Q: 如何导出分析报告？
A: 点击"生成PDF报告"创建报告，然后点击"下载PDF报告"保存到本地。

---

## 📞 技术支持

### 环境检查
如有问题，请检查：
1. 环境变量配置是否正确
2. 网络连接是否正常
3. API 密钥是否有效
4. 依赖包是否完整安装

### 性能优化
- 确保网络连接稳定，避免 API 调用超时
- 定期更新依赖包以获得最佳性能
- 合理使用 API 调用频率，避免触发限制

### 故障排除
- 查看控制台错误信息
- 检查 API 账户余额和权限
- 确认 Python 版本兼容性（3.10+）

---

## 免责声明

1. 本项目及其相关代码、数据接口、生成的分析结果和报告 **仅供学术研究、技术交流和个人学习使用**，不构成任何形式的投资建议、证券分析意见或金融产品推介。

2. 本项目提供的所有分析结论（包括但不限于 AI 生成的评分、研报文本、PDF 报告内容等），均基于 GPT-4o 对 TuShare 数据的分析生成，**可能存在滞后性、不完整性、不准确性**，请使用者独立核实其有效性。

3. 使用者在依据本项目生成的内容进行任何投资或交易决策之前，**应自行承担独立的调查、判断和决策责任**。因使用本项目而直接或间接产生的任何投资损失、财产损失或其他损害，项目作者及贡献者均不承担任何责任。

4. 本项目依赖的第三方数据源（如 TuShare Pro、OpenAI GPT-4o API 等）受其服务条款和使用政策约束，**使用者需自行确保已合法获取并遵守相关服务协议**。

5. **AI 分析结果说明**：所有分析结果均由 GPT-4o 基于 TuShare 数据自动生成，虽然采用了先进的 AI 技术，但仍可能存在分析偏差或错误，使用者应谨慎参考并结合其他信息源进行综合判断。
