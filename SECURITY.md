# 🔒 安全配置指南

## 保护您的 API 密钥

### ⚠️ 重要提醒
**永远不要将您的 API 密钥提交到 Git 仓库中！** 这可能导致：
- 账户被盗用
- 产生意外费用
- 违反服务条款
- 数据泄露

## 🛡️ 安全措施

### 1. 环境变量配置
项目使用 `.env` 文件来存储敏感信息，该文件已被添加到 `.gitignore` 中，不会被提交到 Git。

### 2. 创建 .env 文件
```bash
# 复制示例文件
cp .env.example .env

# 编辑 .env 文件，填入您的真实 API 密钥
nano .env  # 或使用您喜欢的编辑器
```

### 3. .env 文件内容
```env
# TuShare Pro API 配置
TUSHARE_TOKEN=your_actual_tushare_token_here

# OpenAI API 配置
OPENAI_API_KEY=your_actual_openai_api_key_here

# OpenAI 模型配置（可选）
OPENAI_MODEL=gpt-4o
```

## 🔍 安全检查清单

### 提交代码前检查
- [ ] `.env` 文件没有被添加到 Git
- [ ] 没有硬编码的 API 密钥
- [ ] 没有在代码注释中包含真实密钥
- [ ] 没有在日志中输出密钥

### 验证 .gitignore 配置
确保 `.gitignore` 文件包含以下内容：
```
.env
*.env
secrets.json
config.json
credentials.json
api_keys.txt
*.key
```

## 🚨 如果密钥泄露了怎么办

### 立即行动
1. **撤销泄露的密钥**
   - TuShare Pro：登录账户，重新生成 Token
   - OpenAI：登录账户，删除泄露的 API Key，创建新的

2. **检查使用情况**
   - 检查是否有异常使用记录
   - 监控账户余额和调用次数

3. **更新本地配置**
   - 更新 `.env` 文件中的新密钥
   - 确保新密钥没有被提交到 Git

### 预防措施
- 定期轮换 API 密钥
- 使用最小权限原则
- 监控 API 使用情况
- 设置使用限制和告警

## 📋 最佳实践

### 开发环境
- 使用 `.env.example` 作为模板
- 在团队中共享配置说明，而不是真实密钥
- 使用不同的密钥用于开发、测试和生产环境

### 生产环境
- 使用环境变量或密钥管理服务
- 定期轮换密钥
- 监控和记录所有 API 调用

### 代码审查
- 检查是否有硬编码的密钥
- 确保敏感文件没有被意外提交
- 验证 `.gitignore` 配置

## 🔧 故障排除

### 常见问题
1. **"模块导入失败"**
   - 检查 `.env` 文件是否存在
   - 确认 API 密钥格式正确

2. **"API 访问失败"**
   - 验证 API 密钥是否有效
   - 检查账户余额和权限

3. **"环境变量未找到"**
   - 确认 `.env` 文件在项目根目录
   - 检查文件权限

## 📞 获取帮助

如果遇到安全问题：
1. 立即撤销泄露的密钥
2. 检查项目文档
3. 联系相关服务提供商
4. 考虑重新生成所有密钥

---

**记住：安全是每个人的责任！** 🛡️
